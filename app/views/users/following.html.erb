<div class="container">
  <div class="user-show-wrapper">
    <%= render "users/user-menu", user_id: @user.id %>
    <div class="user-info-area">
      <div class="user-info">
        <ul class="follow-list">
          <% if @following.count > 0 %>
            <% @following.each do |user| %>
              <li>
                <div class="follow-info">
                  <%= link_to user_path(user.id) do %>
                    <div class="user-info-small">
                      <span class="follow-name">
                        <%= user.name %>
                      </span>
                      <span class="follow-intro">
                        <%= user.introduce %>
                      </span>
                    </div>
                  <% end %>
                  <% if session[:user_id] == @user.id %>
                    <div class="follow-btn-area">
                      <% if @user.following?(user) %>
                        <%= form_with url: relationship_path, method: :delete do |f| %>
                          <%= f.hidden_field :followed_id, :value => user.id %>
                          <%= f.submit "フォロー解除", class: "btn btn-light" %>
                        <% end %>
                      <% else %>
                        <%= form_with url: relationships_path do |f| %>
                          <%= f.hidden_field :followed_id, :value => user.id %>
                          <%= f.submit "フォローする", class: "btn btn-primary" %>
                        <% end %>
                      <% end %>
                    </div>
                  <% end %>
                </div>
              </li>
            <% end %>
          <% else %>
            <p>フォローしているユーザーはいません</p>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>